<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/asciidoc/testing-value-objects.adoc at 2023-03-03
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>cui value-object testing &#x2013; </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>cui value-object testing</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-03-03<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.2.0-SNAPSHOT</li>
        <li class="pull-right"><a href="https://github.com/cuioss/cui-test-value-objects" class="externalLink" title="Home">Home</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="about.html" title="About"><span class="none"></span>About</a></li>
    <li class="active"><a><span class="none"></span>Value-Object-Testing</a></li>
    <li><a href="testing-mapper.html" title="Testing Mapper Classes"><span class="none"></span>Testing Mapper Classes</a></li>
    <li><a href="managing-metadata.html" title="Managing Metadata"><span class="none"></span>Managing Metadata</a></li>
    <li><a href="generator-system.html" title="Generator System"><span class="none"></span>Generator System</a></li>
    <li><a href="eflection-system.html" title="Reflection System"><span class="none"></span>Reflection System</a></li>
    <li><a href="simple-canonical-object-methods.html" title="Simplified Testing of Canonical Object Methods"><span class="none"></span>Simplified Testing of Canonical Object Methods</a></li>
    <li><a href="apidocs/index.html" title="JavaDoc"><span class="none"></span>JavaDoc</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<div class="sect1">
<h2 id="testing_value_objects">Testing Value Objects</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="concepts">Concepts</h3>
<div class="paragraph">
<p>Reflection-based examination and generators are the corner-stones of the tests. In essence the framework examines the value-object to be tested, creates a meta-model for all of its properties and provides generators for the object itself and all related properties.
See <a href="managing-metadata.adoc">Managing Metadata</a>, and <a href="generator-system.adoc">Generator System</a> and <a href="reflection-system.adoc">Reflection System</a>  for details.
The resulting metadata is always logged on info-level for eventual debugging / trouble-shooting.
With this information-set the framework is now capable of testing the objects in all variants.</p>
</div>
</div>
<div class="sect2">
<h3 id="how_to_use_it">How To use it</h3>
<div class="paragraph">
<p>Because of the many things you can do with it, we cover the features by use-cases. In common for all these tests is the extends of <code>ValueObjectTest&lt;&gt;</code> and logging at info-level what will be tested with which configuration / parameter.</p>
</div>
<div class="sect3">
<h4 id="testing_java_beans">Testing Java-Beans</h4>
<div class="paragraph">
<p>Testing Java Beans is simple and flexible. Most of the heavy-lifting is done by the framework. For most use-cases one annotation is sufficient:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> @VerifyBeanProperty
 class SomeBeanTest extends ValueObjectTest&lt;SomeBean&gt;{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will implicitly test all Getter/ Setter methods of the bean. As well it tests the canonical object methods. Caution: The type <code>SomeBean</code> should implement the JavaBeans API Specification and provide a public zero-argument constructor, otherwise the test may fail with certain exceptions.</p>
</div>
<div class="paragraph">
<p>The annotation <code>@VerifyBeanProperty</code> provides some attributes for fine-tuning the tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="testing_builder">Testing Builder</h4>
<div class="paragraph">
<p>If used on ValueObjectTest <code>@VerifyBuilder</code> checks / tests builder of value objects.</p>
</div>
<div class="paragraph">
<p>As default the test assumes a static factory method with the name "builder", e.g. <code>PropertyMetadataImpl.builder()</code> being present on the type to be tested. This can be controlled using <code>builderFactoryMethodName()</code>, <code>builderFactoryProvidingClass()</code> and <code>builderMethodName()</code>. In case you have a builder that can be instantiated directly by using a zero-argument public constructor directly you can use <code>builderClass()</code> instead.</p>
</div>
<div class="paragraph">
<p>The builder methods for the individual properties are assumed to use the property-name only as method-name, e.g. <code>PropertyMetadataBuilder.propertyClass(Class)</code>. In case you prefer a prefix you can either configure it using <code>methodPrefix()</code> or can do some more fine grained configuration with <code>@PropertyBuilderConfig</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> @VerifyBuilder
 class SomeBeanTest extends ValueObjectTest&lt;SomeBean&gt;{...}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="testing_constructor">Testing Constructor</h4>
<div class="paragraph">
<p><code>@VerifyConstructor</code> tests concrete constructors. The different attributes are identified by their names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> @VerifyConstructor(of = "name", required = "name")
 @VerifyConstructor(of = { "name", "number" }, required = { "name", "number" })
 class SomeBeanTest extends ValueObjectTest&lt;SomeBean&gt;{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will test the two distinct constructors defined by the type <code>SomeBean</code>. The tests will instantiate and check whether the property is available. In the case of <code>required</code> it will test passing <code>null</code> as parameter and expecting an exception to be thrown. In case of an attribute not being required it will as well pass <code>null</code> but no exception should occur.</p>
</div>
<div class="paragraph">
<p>The annotation <code>@VerifyConstructor</code> provides some attributes for fine-tuning the tests.</p>
</div>
</div>
<div class="sect3">
<h4 id="testing_factory_methods">Testing Factory Methods</h4>
<div class="paragraph">
<p><code>@VerifyFactoryMethod</code> tests concrete factory-methods. The different attributes are identified by their names.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> @VerifyFactoryMethod(of = "name")
 @VerifyFactoryMethod(of = { "name", "number" }, required = { "name", "number" })
 class SomeBeanTest extends ValueObjectTest&lt;SomeBean&gt;{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will test the two distinct factory-methods defined by the type <code>SomeBean</code>. The tests will instantiate and check whether the property is available on the created instance. In the case of <code>required</code> it will test passing <code>null</code> as parameter and expecting an exception to be thrown. In case of an attribute not being required it will as well pass <code>null</code> but no exception should occur.</p>
</div>
<div class="paragraph">
<p>The annotation <code>@VerifyFactoryMethod</code> provides some attributes for fine-tuning the tests.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="canonical_object_methods">Canonical Object Methods</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="canonical">Canonical?</h3>
<div class="paragraph">
<p>The canonical object methods are the identity-related methods <code>Object#equals()</code> <code>Object#hashCode()</code>, the descriptive method <code>Object#toString()</code>. See 'Effective Java' for further information on why and how to implement them.</p>
</div>
<div class="paragraph">
<p>In addition we test the object-serialization, see <code>java.io.Serializable</code> in that context as well.
These tests are implicitly executed assuming a well implemented value-object implements all these methods.</p>
</div>
<div class="paragraph">
<p>Compared to the standard testing executed in the context of <a href="simple-canonical-object-methods.adoc">Simplified Testing of Canonical Object Methods</a> these tests do real in-depth inspection, testing many variants iterating through all properties and its permutations.</p>
</div>
</div>
<div class="sect2">
<h3 id="how_to_disable_certain_tests">How to disable certain tests</h3>
<div class="paragraph">
<p>Sometimes you have a  value-object without one our more of the said methods implemented. For these occasions you can ignore specific test by annotating them accordingly.
This is done by adding the <code>@VetoObjectTestContract</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> @VerifyFactoryMethod(of = "name")
 @VetoObjectTestContract(ObjectTestContracts.TO_STRING)
 class SomeBeanTest extends ValueObjectTest&lt;SomeBean&gt;{...}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tweaking_canonical_method_testing">Tweaking Canonical Method Testing</h3>
<div class="paragraph">
<p>You can adjust the behavior by applying the <code>@ObjectTestConfig</code> annotation that can configure many aspects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> @VerifyBuilder
 @ObjectTestConfig(equalsAndHashCodeExclude = "generator")
 class PropertyMetadataImplTest extends ValueObjectTest&lt;PropertyMetadataImpl&gt; {...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you set the property <code>equalsAndHashCodeBasicOnly</code> or <code>serializableBasicOnly</code> you will get exactly the same behavior as described within <a href="simple-canonical-object-methods.adoc">Simplified Testing of Canonical Object Methods</a>.</p>
</div>
<div class="sect3">
<h4 id="sample_log_output_for_equalsandhashcode_contract">Sample Log Output for EqualsAndHashcode contract</h4>
<div class="listingblock">
<div class="content">
<pre>INFO: Verifying de.cuioss.test.valueobjects.contract.EqualsAndHashcodeContractImpl
With configuration: de.cuioss.test.valueobjects.objects.impl.BeanInstantiator
Property Configuration: de.cuioss.test.valueobjects.objects.RuntimeProperties
Required properties: -
Additional properties: country, streetName, city, use, postalCode, houseNumber, id, state, unstructuredAddress, type, contentForFormatterSupport, empty
Default valued properties: empty
Writable properties: country, streetName, city, use, postalCode, houseNumber, id, state, unstructuredAddress, type
Okt 14, 2020 5:38:24 PM de.cuioss.test.valueobjects.contract.EqualsAndHashcodeContractImpl executePropertyTests
INFO: Configured attributes found for equalsAndHashCode-testing: [city, country, houseNumber, id, postalCode, state, streetName, type, unstructuredAddress, use]</pre>
</div>
</div>
</div>
</div>
</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2022&#x2013;2023
<a href="https://github.com/cuioss">CUI-OpenSource-Software</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
